{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst stream_1 = require(\"../readers/stream\");\n\nconst provider_1 = require(\"./provider\");\n\nclass ProviderAsync extends provider_1.default {\n  constructor() {\n    super(...arguments);\n    this._reader = new stream_1.default(this._settings);\n  }\n\n  read(task) {\n    const root = this._getRootDirectory(task);\n\n    const options = this._getReaderOptions(task);\n\n    const entries = [];\n    return new Promise((resolve, reject) => {\n      const stream = this.api(root, task, options);\n      stream.once('error', reject);\n      stream.on('data', entry => entries.push(options.transform(entry)));\n      stream.once('end', () => resolve(entries));\n    });\n  }\n\n  api(root, task, options) {\n    if (task.dynamic) {\n      return this._reader.dynamic(root, options);\n    }\n\n    return this._reader.static(task.patterns, options);\n  }\n\n}\n\nexports.default = ProviderAsync;","map":{"version":3,"sources":["/home/alan/delivery_2/previously_on/client/node_modules/fast-glob/out/providers/async.js"],"names":["Object","defineProperty","exports","value","stream_1","require","provider_1","ProviderAsync","default","constructor","arguments","_reader","_settings","read","task","root","_getRootDirectory","options","_getReaderOptions","entries","Promise","resolve","reject","stream","api","once","on","entry","push","transform","dynamic","static","patterns"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,mBAAD,CAAxB;;AACA,MAAMC,UAAU,GAAGD,OAAO,CAAC,YAAD,CAA1B;;AACA,MAAME,aAAN,SAA4BD,UAAU,CAACE,OAAvC,CAA+C;AAC3CC,EAAAA,WAAW,GAAG;AACV,UAAM,GAAGC,SAAT;AACA,SAAKC,OAAL,GAAe,IAAIP,QAAQ,CAACI,OAAb,CAAqB,KAAKI,SAA1B,CAAf;AACH;;AACDC,EAAAA,IAAI,CAACC,IAAD,EAAO;AACP,UAAMC,IAAI,GAAG,KAAKC,iBAAL,CAAuBF,IAAvB,CAAb;;AACA,UAAMG,OAAO,GAAG,KAAKC,iBAAL,CAAuBJ,IAAvB,CAAhB;;AACA,UAAMK,OAAO,GAAG,EAAhB;AACA,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,YAAMC,MAAM,GAAG,KAAKC,GAAL,CAAST,IAAT,EAAeD,IAAf,EAAqBG,OAArB,CAAf;AACAM,MAAAA,MAAM,CAACE,IAAP,CAAY,OAAZ,EAAqBH,MAArB;AACAC,MAAAA,MAAM,CAACG,EAAP,CAAU,MAAV,EAAmBC,KAAD,IAAWR,OAAO,CAACS,IAAR,CAAaX,OAAO,CAACY,SAAR,CAAkBF,KAAlB,CAAb,CAA7B;AACAJ,MAAAA,MAAM,CAACE,IAAP,CAAY,KAAZ,EAAmB,MAAMJ,OAAO,CAACF,OAAD,CAAhC;AACH,KALM,CAAP;AAMH;;AACDK,EAAAA,GAAG,CAACT,IAAD,EAAOD,IAAP,EAAaG,OAAb,EAAsB;AACrB,QAAIH,IAAI,CAACgB,OAAT,EAAkB;AACd,aAAO,KAAKnB,OAAL,CAAamB,OAAb,CAAqBf,IAArB,EAA2BE,OAA3B,CAAP;AACH;;AACD,WAAO,KAAKN,OAAL,CAAaoB,MAAb,CAAoBjB,IAAI,CAACkB,QAAzB,EAAmCf,OAAnC,CAAP;AACH;;AArB0C;;AAuB/Cf,OAAO,CAACM,OAAR,GAAkBD,aAAlB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst stream_1 = require(\"../readers/stream\");\nconst provider_1 = require(\"./provider\");\nclass ProviderAsync extends provider_1.default {\n    constructor() {\n        super(...arguments);\n        this._reader = new stream_1.default(this._settings);\n    }\n    read(task) {\n        const root = this._getRootDirectory(task);\n        const options = this._getReaderOptions(task);\n        const entries = [];\n        return new Promise((resolve, reject) => {\n            const stream = this.api(root, task, options);\n            stream.once('error', reject);\n            stream.on('data', (entry) => entries.push(options.transform(entry)));\n            stream.once('end', () => resolve(entries));\n        });\n    }\n    api(root, task, options) {\n        if (task.dynamic) {\n            return this._reader.dynamic(root, options);\n        }\n        return this._reader.static(task.patterns, options);\n    }\n}\nexports.default = ProviderAsync;\n"]},"metadata":{},"sourceType":"script"}