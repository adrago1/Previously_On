{"ast":null,"code":"import _slicedToArray from\"/home/alan/delivery_2/previously_on/client/Previously_On/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useMemo,useState}from\"react\";import axios from\"axios\";import Pagination from'../base/pagination';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PageSize=12;export default function ShowList(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),showListing=_useState4[0],setShowListing=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),searchByName=_useState8[0],setSearchByName=_useState8[1];useEffect(function(){var mounted=true;axios.get(\"https://api.betaseries.com/shows/list\",{params:{client_id:\"22f661bdce5c\",order:\"popularity\",limit:\"200\"}}).then(function(res){if(mounted){setShowListing(res.data.shows);setCurrentPage(1);setLoading(false);}}).catch(function(error){console.log(error.response);});return function cleanup(){mounted=false;};},[]);var currentShowArray=useMemo(function(){var firstPageIndex=(currentPage-1)*PageSize;var lastPageIndex=firstPageIndex+PageSize;return showListing.slice(firstPageIndex,lastPageIndex);},[currentPage]);return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto text-white mt-7 mb-10\",children:loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center mx-auto text-2xl font-cabin mt-28 uppercase font-bold\",children:\"Chargement des s\\xE9ries...\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-2 font-cabin text-2xl\",htmlFor:\"name\",children:\"Rechercher une s\\xE9rie\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"text-black\",name:\"name\",onChange:function onChange(e){setSearchByName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-x-8 gap-y-8 gap col-span-2 grid-cols-2\",children:[currentShowArray.map(function(data){return/*#__PURE__*/_jsxs(\"div\",{className:\"font-roboto rounded-r-lg bg-gray-500 bg-opacity-30\",children:[/*#__PURE__*/_jsx(Link,{to:{pathname:'/serie/details',state:data.id},children:/*#__PURE__*/_jsx(\"img\",{src:data.images.poster,href:\"Affiche de s\\xE9rie\",className:\"float-left w-2/5 mr-2\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"infos-thumb-show my-1\",children:[/*#__PURE__*/_jsx(Link,{to:{pathname:'/serie/details',state:data.id},className:\"text-xl text-yellow-400 font-bold filter contrast-150\",children:data.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Saisons : \",data.seasons]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Episodes : \",data.episodes]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300\",children:data.creation}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 font-cabin text-sm description-shrink text-left\",children:data.description})]})]})]});}),/*#__PURE__*/_jsx(Pagination,{className:\"pagination-bar col-span-2 mx-auto\",currentPage:currentPage,totalCount:showListing.length,pageSize:PageSize,onPageChange:function onPageChange(page){return setCurrentPage(page);}})]})]})});}","map":{"version":3,"sources":["/home/alan/delivery_2/previously_on/client/Previously_On/src/components/showList/showList.js"],"names":["React","useEffect","useMemo","useState","axios","Pagination","Link","PageSize","ShowList","loading","setLoading","showListing","setShowListing","currentPage","setCurrentPage","searchByName","setSearchByName","mounted","get","params","client_id","order","limit","then","res","data","shows","catch","error","console","log","response","cleanup","currentShowArray","firstPageIndex","lastPageIndex","slice","e","target","value","map","pathname","state","id","images","poster","title","seasons","episodes","creation","description","length","page"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\nimport Pagination from '../base/pagination';\nimport { Link } from \"react-router-dom\";\n\nlet PageSize = 12;\n\nexport default function ShowList() {\n\n    const [loading, setLoading] = useState(true);\n\n    const [showListing, setShowListing] = useState([]);\n    const [currentPage, setCurrentPage] = useState(0);\n    const [searchByName, setSearchByName] = useState(\"\");\n\n    useEffect(() => {\n\n        let mounted = true;\n        axios.get(\"https://api.betaseries.com/shows/list\", {\n            params: {\n                client_id: \"22f661bdce5c\",\n                order: \"popularity\",\n                limit: \"200\",\n            }\n        }).then(res => {\n            if (mounted) {\n                setShowListing(res.data.shows);\n                setCurrentPage(1);\n                setLoading(false);\n            }\n        }).catch(error => {\n            console.log(error.response);\n        })\n\n        return function cleanup() {\n            mounted = false;\n        }\n        \n    }, []);\n\n\n    const currentShowArray = useMemo(() => {\n        const firstPageIndex = (currentPage - 1) * PageSize;\n        const lastPageIndex = firstPageIndex + PageSize;\n        return showListing.slice(firstPageIndex, lastPageIndex);\n    }, [currentPage]);\n    \n    return (\n        <div className=\"container mx-auto text-white mt-7 mb-10\">\n            {loading ? <p className=\"text-center mx-auto text-2xl font-cabin mt-28 uppercase font-bold\">Chargement des séries...</p> : \n            <div className=\"grid grid-cols-3\">\n                <div className=\"col-span-1\">\n                    <label className=\"block mb-2 font-cabin text-2xl\" htmlFor=\"name\">Rechercher une série</label>\n                    <input type=\"text\" className=\"text-black\" name=\"name\" onChange={(e) => {setSearchByName(e.target.value)}} />\n                </div>\n                <div className=\"grid gap-x-8 gap-y-8 gap col-span-2 grid-cols-2\">\n                    {currentShowArray.map(function(data) {\n                        return(\n                            <div className=\"font-roboto rounded-r-lg bg-gray-500 bg-opacity-30\">\n                                <Link to={{pathname: '/serie/details', state: data.id}}><img src={data.images.poster} href=\"Affiche de série\" className=\"float-left w-2/5 mr-2\"/></Link>\n                                <div className=\"infos-thumb-show my-1\">\n                                    <Link to={{pathname: '/serie/details', state: data.id}} className=\"text-xl text-yellow-400 font-bold filter contrast-150\">{data.title}</Link>\n                                    <div className=\"mt-5\">\n                                        <p>Saisons : {data.seasons}</p>\n                                        <p>Episodes : {data.episodes}</p>\n                                        <p className=\"text-gray-300\">{data.creation}</p>\n                                        <p className=\"mt-4 font-cabin text-sm description-shrink text-left\">{data.description}</p>\n                                    </div>\n                                </div>\n                            </div>\n                        )\n                    })}\n                    <Pagination\n                        className=\"pagination-bar col-span-2 mx-auto\"\n                        currentPage={currentPage}\n                        totalCount={showListing.length}\n                        pageSize={PageSize}\n                        onPageChange={page => setCurrentPage(page)}\n                    />\n                </div>\n            </div>\n            }\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}