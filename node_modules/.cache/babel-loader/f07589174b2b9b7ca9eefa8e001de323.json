{"ast":null,"code":"import _slicedToArray from\"/home/alan/delivery_2/previously_on/client/Previously_On/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import AuthService from\"../../services/auth-service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Friends(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var user=AuthService.getCurrentUser();var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),friendList=_useState4[0],setFriendList=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),friendInput=_useState6[0],setFriendInput=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),friendRequest=_useState8[0],setFriendRequest=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),blocked=_useState10[0],setBlocked=_useState10[1];useEffect(function(){var mounted=true;axios.get(\"https://api.betaseries.com/friends/list\",{params:{client_id:\"22f661bdce5c\",id:user.user.id,token:user.token}}).then(function(res){if(mounted){setFriendList(res.data.users);console.log(res.data.users);setLoading(false);}}).catch(function(error){console.log(error.response);});axios.get(\"https://api.betaseries.com/friends/requests\",{params:{client_id:\"22f661bdce5c\",token:user.token}}).then(function(res){if(mounted){setFriendRequest(res.data.users);console.log(res.data.users);setLoading(false);}}).catch(function(error){console.log(error.response);});return function cleanup(){mounted=false;};},[]);var handleChange=function handleChange(e){setFriendInput(e.target.value);console.log(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();axios.get(\"https://api.betaseries.com/friends/find\",{params:{client_id:\"22f661bdce5c\",type:\"emails\",token:user.token,emails:friendInput}}).then(function(res){return axios.post(\"https://api.betaseries.com/friends/friend\",{token:user.token,client_id:\"22f661bdce5c\",id:res.data.users[0].id}).then(function(response){alert(\"Ami ajouté !\");}).catch(function(error){console.log(res.data.users.id);console.log(error.response);});}).catch(function(err){console.log(err.response);});};var handleBlock=function handleBlock(idUser){axios.post(\"https://api.betaseries.com/friends/block\",{client_id:\"22f661bdce5c\",token:user.token,id:idUser}).then(function(res){alert(\"Utilisateur bloqué\");setBlocked(true);}).catch(function(error){console.log(error.response);});};var handleUnblock=function handleUnblock(idUser){axios.delete(\"https://api.betaseries.com/friends/block\",{params:{client_id:\"22f661bdce5c\",token:user.token,id:idUser}}).then(function(res){alert(\"Utilisateur débloqué\");setBlocked(false);}).catch(function(error){console.log(error.response);});};var handleDelete=function handleDelete(idUser){axios.delete(\"https://api.betaseries.com/friends/friend\",{params:{client_id:\"22f661bdce5c\",token:user.token,id:idUser}}).then(function(res){alert(\"Utilisateur supprimé\");setBlocked(true);}).catch(function(error){console.log(error.response);});};return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto mt-24 border w-3/4 text-white text-xl\",children:loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center mx-auto text-2xl font-cabin mt-28 uppercase font-bold\",children:\"Chargement des informations...\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-6 gap-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-10 text-center\",children:\"AMIS\"}),friendList.map(function(data){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center flex-row\",children:[blocked&&/*#__PURE__*/_jsx(\"p\",{className:\"mr-16 line-through\",children:data.login}),!blocked&&/*#__PURE__*/_jsx(\"p\",{className:\"mr-16\",children:data.login}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleBlock(data.id);},className:\"border p-1 text-right mr-3\",children:\"BLOCK\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleDelete(data.id);},className:\"border p-1 text-right\",children:\"SUPPR\"})]});})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-8 text-center\",children:\"ENVOYER UNE DEMANDE\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email :\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",className:\"text-black w-full\",type:\"text\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-5 cursor-pointer shadow bg-yellow-300 hover:bg-yellow-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded\",type:\"submit\",value:\"Envoyer\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"mb-10 text-center\",children:\"DEMANDES D'AMI\"})})]})});}","map":{"version":3,"sources":["/home/alan/delivery_2/previously_on/client/Previously_On/src/components/friends/friends.js"],"names":["React","useEffect","useState","axios","AuthService","Friends","loading","setLoading","user","getCurrentUser","friendList","setFriendList","friendInput","setFriendInput","friendRequest","setFriendRequest","blocked","setBlocked","mounted","get","params","client_id","id","token","then","res","data","users","console","log","catch","error","response","cleanup","handleChange","e","target","value","handleSubmit","preventDefault","type","emails","post","alert","err","handleBlock","idUser","handleUnblock","delete","handleDelete","map","login"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport AuthService from \"../../services/auth-service\";\n\nexport default function Friends() {\n\n    const [loading, setLoading] = useState(true);\n    const user = AuthService.getCurrentUser();\n    const [friendList, setFriendList] = useState([]);\n    const [friendInput, setFriendInput] = useState(\"\");\n    const [friendRequest, setFriendRequest] = useState([]);\n    const [blocked, setBlocked] = useState(false);\n\n\n    useEffect(() => {\n        let mounted = true;\n        axios.get(\"https://api.betaseries.com/friends/list\", {\n            params: {\n                client_id: \"22f661bdce5c\",\n                id: user.user.id,\n                token: user.token\n            }\n        }).then(res => {\n            if (mounted) {\n                setFriendList(res.data.users);\n                console.log(res.data.users);\n                setLoading(false);\n            }\n        }).catch(error => {\n            console.log(error.response);\n        })\n\n        axios.get(\"https://api.betaseries.com/friends/requests\", {\n            params: {\n                client_id: \"22f661bdce5c\",\n                token: user.token,\n            }\n        }).then(res => {\n            if (mounted) {\n                setFriendRequest(res.data.users);\n                console.log(res.data.users);\n                setLoading(false);\n            }\n        }).catch(error => {\n            console.log(error.response);\n        })\n\n        return function cleanup() {\n            mounted = false;\n        }\n    }, [])\n\n\n    const handleChange = (e) => {\n        setFriendInput(e.target.value);\n        console.log(e.target.value);\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        axios.get(\"https://api.betaseries.com/friends/find\", {\n            params: {\n                client_id: \"22f661bdce5c\",\n                type: \"emails\",\n                token: user.token,\n                emails: friendInput\n            }\n        }).then(res => {\n            return axios.post(\"https://api.betaseries.com/friends/friend\", {\n                token: user.token,\n                client_id: \"22f661bdce5c\",\n                id: res.data.users[0].id\n            }).then(response => {\n                alert(\"Ami ajouté !\")\n            }).catch(error => {\n                console.log(res.data.users.id);\n                console.log(error.response);\n            })\n        }).catch(err => {\n            console.log(err.response);\n        })\n    }\n\n    const handleBlock = (idUser) => {\n\n        axios.post(\"https://api.betaseries.com/friends/block\", {\n            client_id: \"22f661bdce5c\",\n            token: user.token,\n            id: idUser\n        }).then(res => {\n            alert(\"Utilisateur bloqué\");\n            setBlocked(true);\n        }).catch(error => {\n            console.log(error.response);\n        })\n    }\n\n    const handleUnblock = (idUser) => {\n        axios.delete(\"https://api.betaseries.com/friends/block\", {\n            params: {\n                client_id: \"22f661bdce5c\",\n                token: user.token,\n                id: idUser\n            }\n        }).then(res => {\n            alert(\"Utilisateur débloqué\");\n            setBlocked(false);\n        }).catch(error => {\n            console.log(error.response);\n        })\n    }\n\n    const handleDelete = (idUser) => {\n        axios.delete(\"https://api.betaseries.com/friends/friend\", {\n            params: {\n                client_id: \"22f661bdce5c\",\n                token: user.token,\n                id: idUser\n            }\n        }).then(res => {\n            alert(\"Utilisateur supprimé\");\n            setBlocked(true);\n        }).catch(error => {\n            console.log(error.response);\n        }) \n    }\n\n    return (\n        <div className=\"container mx-auto mt-24 border w-3/4 text-white text-xl\">\n            {loading ? <p className=\"text-center mx-auto text-2xl font-cabin mt-28 uppercase font-bold\">Chargement des informations...</p> :\n            <div className=\"grid grid-cols-6 gap-16\">\n                <div className=\"col-span-2\">\n                    <p className=\"mb-10 text-center\">AMIS</p>\n                    {friendList.map(function(data) {\n                    return(\n                        <div className=\"flex items-center flex-row\">\n                            {blocked &&\n                            <p className=\"mr-16 line-through\">{data.login}</p> \n                            }\n                            {!blocked &&\n                            <p className=\"mr-16\">{data.login}</p>\n                            }\n                            <button onClick={(e) => handleBlock(data.id)} className=\"border p-1 text-right mr-3\">BLOCK</button>\n                            <button onClick={(e) => handleDelete(data.id)} className=\"border p-1 text-right\">SUPPR</button>\n                        </div>\n                    )  \n                    })}\n                </div>\n                <div className=\"col-span-2\">\n                    <p className=\"mb-8 text-center\">ENVOYER UNE DEMANDE</p>\n                    <form onSubmit={handleSubmit}>\n                        <label htmlFor=\"email\">Email :</label>\n                        <input name=\"email\" className=\"text-black w-full\" type=\"text\" onChange={handleChange} />\n                        <input className=\"mt-5 cursor-pointer shadow bg-yellow-300 hover:bg-yellow-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded\" type=\"submit\" value=\"Envoyer\" />\n                    </form>\n                </div>\n                <div className=\"col-span-2\">\n                    <p className=\"mb-10 text-center\">DEMANDES D'AMI</p>\n                </div>\n            </div>\n            }\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}