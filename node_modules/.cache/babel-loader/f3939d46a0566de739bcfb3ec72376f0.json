{"ast":null,"code":"import { access as e, readFile as t, constants as s } from \"fs\";\nimport r from \"glob\";\nimport i from \"path\";\nimport { parse as a } from \"postcss\";\nimport n from \"postcss-selector-parser\";\nimport { promisify as o } from \"util\";\n\nfunction c(e, t) {\n  t && t.forEach(e.add, e);\n}\n\nclass l {\n  constructor(e) {\n    this.undetermined = new Set(), this.attrNames = new Set(), this.attrValues = new Set(), this.classes = new Set(), this.ids = new Set(), this.tags = new Set(), this.merge(e);\n  }\n\n  merge(e) {\n    return Array.isArray(e) ? c(this.undetermined, e) : e instanceof l ? (c(this.undetermined, e.undetermined), c(this.attrNames, e.attrNames), c(this.attrValues, e.attrValues), c(this.classes, e.classes), c(this.ids, e.ids), c(this.tags, e.tags)) : (c(this.undetermined, e.undetermined), e.attributes && (c(this.attrNames, e.attributes.names), c(this.attrValues, e.attributes.values)), c(this.classes, e.classes), c(this.ids, e.ids), c(this.tags, e.tags)), this;\n  }\n\n  hasAttrName(e) {\n    return this.attrNames.has(e) || this.undetermined.has(e);\n  }\n\n  someAttrValue(e) {\n    for (const t of this.attrValues) if (e(t)) return !0;\n\n    for (const t of this.undetermined) if (e(t)) return !0;\n\n    return !1;\n  }\n\n  hasAttrPrefix(e) {\n    return this.someAttrValue(t => t.startsWith(e));\n  }\n\n  hasAttrSuffix(e) {\n    return this.someAttrValue(t => t.endsWith(e));\n  }\n\n  hasAttrSubstr(e) {\n    return e.trim().split(\" \").every(e => this.someAttrValue(t => t.includes(e)));\n  }\n\n  hasAttrValue(e) {\n    return this.attrValues.has(e) || this.undetermined.has(e);\n  }\n\n  hasClass(e) {\n    return this.classes.has(e) || this.undetermined.has(e);\n  }\n\n  hasId(e) {\n    return this.ids.has(e) || this.undetermined.has(e);\n  }\n\n  hasTag(e) {\n    return this.tags.has(e) || this.undetermined.has(e);\n  }\n\n}\n\nconst u = [\"*\", \"::-webkit-scrollbar\", \"::selection\", \":root\", \"::before\", \"::after\"],\n      h = {\n  css: [],\n  content: [],\n  defaultExtractor: e => e.match(/[A-Za-z0-9_-]+/g) || [],\n  extractors: [],\n  fontFace: !1,\n  keyframes: !1,\n  rejected: !1,\n  stdin: !1,\n  stdout: !1,\n  variables: !1,\n  safelist: {\n    standard: [],\n    deep: [],\n    greedy: [],\n    variables: [],\n    keyframes: []\n  },\n  blocklist: [],\n  skippedContentGlobs: [],\n  dynamicAttributes: []\n};\n\nclass d {\n  constructor(e) {\n    this.nodes = [], this.isUsed = !1, this.value = e;\n  }\n\n}\n\nclass f {\n  constructor() {\n    this.nodes = new Map(), this.usedVariables = new Set(), this.safelist = [];\n  }\n\n  addVariable(e) {\n    const {\n      prop: t\n    } = e;\n\n    if (!this.nodes.has(t)) {\n      const s = new d(e);\n      this.nodes.set(t, s);\n    }\n  }\n\n  addVariableUsage(e, t) {\n    const {\n      prop: s\n    } = e,\n          r = this.nodes.get(s);\n\n    for (const e of t) {\n      const t = e[1];\n\n      if (this.nodes.has(t)) {\n        const e = this.nodes.get(t);\n        null == r || r.nodes.push(e);\n      }\n    }\n  }\n\n  addVariableUsageInProperties(e) {\n    for (const t of e) {\n      const e = t[1];\n      this.usedVariables.add(e);\n    }\n  }\n\n  setAsUsed(e) {\n    const t = [this.nodes.get(e)];\n\n    for (; 0 !== t.length;) {\n      const e = t.pop();\n      e && !e.isUsed && (e.isUsed = !0, t.push(...e.nodes));\n    }\n  }\n\n  removeUnused() {\n    for (const e of this.usedVariables) this.setAsUsed(e);\n\n    for (const [e, t] of this.nodes) t.isUsed || this.isVariablesSafelisted(e) || t.value.remove();\n  }\n\n  isVariablesSafelisted(e) {\n    return this.safelist.some(t => \"string\" == typeof t ? t === e : t.test(e));\n  }\n\n}\n\nconst p = {\n  access: o(e),\n  readFile: o(t)\n};\n\nfunction m(e = []) {\n  return Array.isArray(e) ? { ...h.safelist,\n    standard: e\n  } : { ...h.safelist,\n    ...e\n  };\n}\n\nasync function g(e = \"purgecss.config.js\") {\n  let t;\n\n  try {\n    const s = i.join(process.cwd(), e);\n    t = await import(s);\n  } catch (e) {\n    throw new Error(\"Error loading the config file \" + e.message);\n  }\n\n  return { ...h,\n    ...t,\n    safelist: m(t.safelist)\n  };\n}\n\nasync function v(e, t) {\n  return new l(await t(e));\n}\n\nfunction y(e, t) {\n  switch (t) {\n    case \"next\":\n      return e.text.includes(\"purgecss ignore\");\n\n    case \"start\":\n      return e.text.includes(\"purgecss start ignore\");\n\n    case \"end\":\n      return e.text.includes(\"purgecss end ignore\");\n  }\n}\n\nfunction S(...e) {\n  const t = new l([]);\n  return e.forEach(t.merge, t), t;\n}\n\nfunction b(e) {\n  return e.replace(/(^[\"'])|([\"']$)/g, \"\");\n}\n\nfunction w(e, t) {\n  if (!t.hasAttrName(e.attribute)) return !1;\n  if (void 0 === e.value) return !0;\n\n  switch (e.operator) {\n    case \"$=\":\n      return t.hasAttrSuffix(e.value);\n\n    case \"~=\":\n    case \"*=\":\n      return t.hasAttrSubstr(e.value);\n\n    case \"=\":\n      return t.hasAttrValue(e.value);\n\n    case \"|=\":\n    case \"^=\":\n      return t.hasAttrPrefix(e.value);\n\n    default:\n      return !0;\n  }\n}\n\nfunction A(e, t) {\n  return t.hasId(e.value);\n}\n\nfunction F(e, t) {\n  return t.hasTag(e.value);\n}\n\nfunction k(e) {\n  return \"atrule\" === (null == e ? void 0 : e.type);\n}\n\nfunction V(e) {\n  return \"rule\" === (null == e ? void 0 : e.type);\n}\n\nclass x {\n  constructor() {\n    this.ignore = !1, this.atRules = {\n      fontFace: [],\n      keyframes: []\n    }, this.usedAnimations = new Set(), this.usedFontFaces = new Set(), this.selectorsRemoved = new Set(), this.variablesStructure = new f(), this.options = h;\n  }\n\n  collectDeclarationsData(e) {\n    const {\n      prop: t,\n      value: s\n    } = e;\n\n    if (this.options.variables) {\n      const r = function (e, t) {\n        const s = [];\n        return e.replace(t, function () {\n          const t = arguments,\n                r = Array.prototype.slice.call(t, 0, -2);\n          return r.input = t[t.length - 1], r.index = t[t.length - 2], s.push(r), e;\n        }), s;\n      }(s, /var\\((.+?)[,)]/g);\n\n      t.startsWith(\"--\") ? (this.variablesStructure.addVariable(e), r.length > 0 && this.variablesStructure.addVariableUsage(e, r)) : r.length > 0 && this.variablesStructure.addVariableUsageInProperties(r);\n    }\n\n    if (!this.options.keyframes || \"animation\" !== t && \"animation-name\" !== t) {\n      if (this.options.fontFace) {\n        if (\"font-family\" === t) for (const e of s.split(\",\")) {\n          const t = b(e.trim());\n          this.usedFontFaces.add(t);\n        }\n      } else ;\n    } else for (const e of s.split(/[\\s,]+/)) this.usedAnimations.add(e);\n  }\n\n  getFileExtractor(e, t) {\n    const s = t.find(t => t.extensions.find(t => e.endsWith(t)));\n    return void 0 === s ? this.options.defaultExtractor : s.extractor;\n  }\n\n  async extractSelectorsFromFiles(e, t) {\n    const i = new l([]);\n\n    for (const a of e) {\n      let e = [];\n\n      try {\n        await p.access(a, s.F_OK), e.push(a);\n      } catch (t) {\n        e = r.sync(a, {\n          nodir: !0,\n          ignore: this.options.skippedContentGlobs\n        });\n      }\n\n      for (const s of e) {\n        const e = await p.readFile(s, \"utf-8\"),\n              r = this.getFileExtractor(s, t),\n              a = await v(e, r);\n        i.merge(a);\n      }\n    }\n\n    return i;\n  }\n\n  async extractSelectorsFromString(e, t) {\n    const s = new l([]);\n\n    for (const {\n      raw: r,\n      extension: i\n    } of e) {\n      const e = this.getFileExtractor(\".\" + i, t),\n            a = await v(r, e);\n      s.merge(a);\n    }\n\n    return s;\n  }\n\n  evaluateAtRule(e) {\n    if (this.options.keyframes && e.name.endsWith(\"keyframes\")) this.atRules.keyframes.push(e);else if (this.options.fontFace && \"font-face\" === e.name && e.nodes) for (const t of e.nodes) \"decl\" === t.type && \"font-family\" === t.prop && this.atRules.fontFace.push({\n      name: b(t.value),\n      node: e\n    });\n  }\n\n  async evaluateRule(e, t) {\n    if (this.ignore) return;\n    const s = e.prev();\n    if (function (e) {\n      return \"comment\" === (null == e ? void 0 : e.type);\n    }(s) && y(s, \"next\")) return void s.remove();\n    if (e.parent && k(e.parent) && \"keyframes\" === e.parent.name) return;\n    if (!V(e)) return;\n    if (function (e) {\n      let t = !1;\n      return e.walkComments(e => {\n        e && \"comment\" === e.type && e.text.includes(\"purgecss ignore current\") && (t = !0, e.remove());\n      }), t;\n    }(e)) return;\n    let r = !0;\n    if (e.selector = n(e => {\n      e.walk(e => {\n        \"selector\" === e.type && (r = this.shouldKeepSelector(e, t), r || (this.options.rejected && this.selectorsRemoved.add(e.toString()), e.remove()));\n      });\n    }).processSync(e.selector), r && void 0 !== e.nodes) for (const t of e.nodes) \"decl\" === t.type && this.collectDeclarationsData(t);\n    const i = e.parent;\n    e.selector || e.remove(), function (e) {\n      return !!(V(e) && !e.selector || (null == e ? void 0 : e.nodes) && !e.nodes.length || k(e) && (!e.nodes && !e.params || !e.params && e.nodes && !e.nodes.length));\n    }(i) && (null == i || i.remove());\n  }\n\n  async getPurgedCSS(e, t) {\n    const s = [],\n          i = [];\n\n    for (const t of e) \"string\" == typeof t ? i.push(...r.sync(t, {\n      nodir: !0,\n      ignore: this.options.skippedContentGlobs\n    })) : i.push(t);\n\n    for (const e of i) {\n      const r = \"string\" == typeof e ? this.options.stdin ? e : await p.readFile(e, \"utf-8\") : e.raw,\n            i = a(r);\n      this.walkThroughCSS(i, t), this.options.fontFace && this.removeUnusedFontFaces(), this.options.keyframes && this.removeUnusedKeyframes(), this.options.variables && this.removeUnusedCSSVariables();\n      const n = {\n        css: i.toString(),\n        file: \"string\" == typeof e ? e : void 0\n      };\n      \"string\" == typeof e && (n.file = e), this.options.rejected && (n.rejected = Array.from(this.selectorsRemoved), this.selectorsRemoved.clear()), s.push(n);\n    }\n\n    return s;\n  }\n\n  isKeyframesSafelisted(e) {\n    return this.options.safelist.keyframes.some(t => \"string\" == typeof t ? t === e : t.test(e));\n  }\n\n  isSelectorBlocklisted(e) {\n    return this.options.blocklist.some(t => \"string\" == typeof t ? t === e : t.test(e));\n  }\n\n  isSelectorSafelisted(e) {\n    const t = this.options.safelist.standard.some(t => \"string\" == typeof t ? t === e : t.test(e));\n    return u.includes(e) || t;\n  }\n\n  isSelectorSafelistedDeep(e) {\n    return this.options.safelist.deep.some(t => t.test(e));\n  }\n\n  isSelectorSafelistedGreedy(e) {\n    return this.options.safelist.greedy.some(t => t.test(e));\n  }\n\n  async purge(e) {\n    this.options = \"object\" != typeof e ? await g(e) : { ...h,\n      ...e,\n      safelist: m(e.safelist)\n    };\n    const {\n      content: t,\n      css: s,\n      extractors: r,\n      safelist: i\n    } = this.options;\n    this.options.variables && (this.variablesStructure.safelist = i.variables || []);\n    const a = t.filter(e => \"string\" == typeof e),\n          n = t.filter(e => \"object\" == typeof e),\n          o = await this.extractSelectorsFromFiles(a, r),\n          c = await this.extractSelectorsFromString(n, r);\n    return this.getPurgedCSS(s, S(o, c));\n  }\n\n  removeUnusedCSSVariables() {\n    this.variablesStructure.removeUnused();\n  }\n\n  removeUnusedFontFaces() {\n    for (const {\n      name: e,\n      node: t\n    } of this.atRules.fontFace) this.usedFontFaces.has(e) || t.remove();\n  }\n\n  removeUnusedKeyframes() {\n    for (const e of this.atRules.keyframes) this.usedAnimations.has(e.params) || this.isKeyframesSafelisted(e.params) || e.remove();\n  }\n\n  getSelectorValue(e) {\n    return \"attribute\" === e.type && e.attribute || e.value;\n  }\n\n  shouldKeepSelector(e, t) {\n    if (function (e) {\n      return e.parent && \"pseudo\" === e.parent.type && e.parent.value.startsWith(\":\") || !1;\n    }(e)) return !0;\n\n    if (this.options.safelist.greedy.length > 0) {\n      if (e.nodes.map(this.getSelectorValue).some(e => e && this.isSelectorSafelistedGreedy(e))) return !0;\n    }\n\n    let s = !1;\n\n    for (const i of e.nodes) {\n      const e = this.getSelectorValue(i);\n      if (e && this.isSelectorSafelistedDeep(e)) return !0;\n      if (e && (u.includes(e) || this.isSelectorSafelisted(e))) s = !0;else {\n        if (e && this.isSelectorBlocklisted(e)) return !1;\n\n        switch (i.type) {\n          case \"attribute\":\n            s = !![...this.options.dynamicAttributes, \"value\", \"checked\", \"selected\", \"open\"].includes(i.attribute) || w(i, t);\n            break;\n\n          case \"class\":\n            r = i, s = t.hasClass(r.value);\n            break;\n\n          case \"id\":\n            s = A(i, t);\n            break;\n\n          case \"tag\":\n            s = F(i, t);\n            break;\n\n          default:\n            continue;\n        }\n\n        if (!s) return !1;\n      }\n    }\n\n    var r;\n    return s;\n  }\n\n  walkThroughCSS(e, t) {\n    e.walk(e => \"rule\" === e.type ? this.evaluateRule(e, t) : \"atrule\" === e.type ? this.evaluateAtRule(e) : void (\"comment\" === e.type && (y(e, \"start\") ? (this.ignore = !0, e.remove()) : y(e, \"end\") && (this.ignore = !1, e.remove()))));\n  }\n\n}\n\nexport default x;\nexport { x as PurgeCSS, h as defaultOptions, S as mergeExtractorSelectors, g as setOptions, m as standardizeSafelist };","map":{"version":3,"sources":["/home/alan/delivery_2/previously_on/client/node_modules/purgecss/lib/purgecss.esm.js"],"names":["access","e","readFile","t","constants","s","r","i","parse","a","n","promisify","o","c","forEach","add","l","constructor","undetermined","Set","attrNames","attrValues","classes","ids","tags","merge","Array","isArray","attributes","names","values","hasAttrName","has","someAttrValue","hasAttrPrefix","startsWith","hasAttrSuffix","endsWith","hasAttrSubstr","trim","split","every","includes","hasAttrValue","hasClass","hasId","hasTag","u","h","css","content","defaultExtractor","match","extractors","fontFace","keyframes","rejected","stdin","stdout","variables","safelist","standard","deep","greedy","blocklist","skippedContentGlobs","dynamicAttributes","d","nodes","isUsed","value","f","Map","usedVariables","addVariable","prop","set","addVariableUsage","get","push","addVariableUsageInProperties","setAsUsed","length","pop","removeUnused","isVariablesSafelisted","remove","some","test","p","m","g","join","process","cwd","Error","message","v","y","text","S","b","replace","w","attribute","operator","A","F","k","type","V","x","ignore","atRules","usedAnimations","usedFontFaces","selectorsRemoved","variablesStructure","options","collectDeclarationsData","arguments","prototype","slice","call","input","index","getFileExtractor","find","extensions","extractor","extractSelectorsFromFiles","F_OK","sync","nodir","extractSelectorsFromString","raw","extension","evaluateAtRule","name","node","evaluateRule","prev","parent","walkComments","selector","walk","shouldKeepSelector","toString","processSync","params","getPurgedCSS","walkThroughCSS","removeUnusedFontFaces","removeUnusedKeyframes","removeUnusedCSSVariables","file","from","clear","isKeyframesSafelisted","isSelectorBlocklisted","isSelectorSafelisted","isSelectorSafelistedDeep","isSelectorSafelistedGreedy","purge","filter","getSelectorValue","map","PurgeCSS","defaultOptions","mergeExtractorSelectors","setOptions","standardizeSafelist"],"mappings":"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","sourcesContent":["import{access as e,readFile as t,constants as s}from\"fs\";import r from\"glob\";import i from\"path\";import{parse as a}from\"postcss\";import n from\"postcss-selector-parser\";import{promisify as o}from\"util\";function c(e,t){t&&t.forEach(e.add,e)}class l{constructor(e){this.undetermined=new Set,this.attrNames=new Set,this.attrValues=new Set,this.classes=new Set,this.ids=new Set,this.tags=new Set,this.merge(e)}merge(e){return Array.isArray(e)?c(this.undetermined,e):e instanceof l?(c(this.undetermined,e.undetermined),c(this.attrNames,e.attrNames),c(this.attrValues,e.attrValues),c(this.classes,e.classes),c(this.ids,e.ids),c(this.tags,e.tags)):(c(this.undetermined,e.undetermined),e.attributes&&(c(this.attrNames,e.attributes.names),c(this.attrValues,e.attributes.values)),c(this.classes,e.classes),c(this.ids,e.ids),c(this.tags,e.tags)),this}hasAttrName(e){return this.attrNames.has(e)||this.undetermined.has(e)}someAttrValue(e){for(const t of this.attrValues)if(e(t))return!0;for(const t of this.undetermined)if(e(t))return!0;return!1}hasAttrPrefix(e){return this.someAttrValue((t=>t.startsWith(e)))}hasAttrSuffix(e){return this.someAttrValue((t=>t.endsWith(e)))}hasAttrSubstr(e){return e.trim().split(\" \").every((e=>this.someAttrValue((t=>t.includes(e)))))}hasAttrValue(e){return this.attrValues.has(e)||this.undetermined.has(e)}hasClass(e){return this.classes.has(e)||this.undetermined.has(e)}hasId(e){return this.ids.has(e)||this.undetermined.has(e)}hasTag(e){return this.tags.has(e)||this.undetermined.has(e)}}const u=[\"*\",\"::-webkit-scrollbar\",\"::selection\",\":root\",\"::before\",\"::after\"],h={css:[],content:[],defaultExtractor:e=>e.match(/[A-Za-z0-9_-]+/g)||[],extractors:[],fontFace:!1,keyframes:!1,rejected:!1,stdin:!1,stdout:!1,variables:!1,safelist:{standard:[],deep:[],greedy:[],variables:[],keyframes:[]},blocklist:[],skippedContentGlobs:[],dynamicAttributes:[]};class d{constructor(e){this.nodes=[],this.isUsed=!1,this.value=e}}class f{constructor(){this.nodes=new Map,this.usedVariables=new Set,this.safelist=[]}addVariable(e){const{prop:t}=e;if(!this.nodes.has(t)){const s=new d(e);this.nodes.set(t,s)}}addVariableUsage(e,t){const{prop:s}=e,r=this.nodes.get(s);for(const e of t){const t=e[1];if(this.nodes.has(t)){const e=this.nodes.get(t);null==r||r.nodes.push(e)}}}addVariableUsageInProperties(e){for(const t of e){const e=t[1];this.usedVariables.add(e)}}setAsUsed(e){const t=[this.nodes.get(e)];for(;0!==t.length;){const e=t.pop();e&&!e.isUsed&&(e.isUsed=!0,t.push(...e.nodes))}}removeUnused(){for(const e of this.usedVariables)this.setAsUsed(e);for(const[e,t]of this.nodes)t.isUsed||this.isVariablesSafelisted(e)||t.value.remove()}isVariablesSafelisted(e){return this.safelist.some((t=>\"string\"==typeof t?t===e:t.test(e)))}}const p={access:o(e),readFile:o(t)};function m(e=[]){return Array.isArray(e)?{...h.safelist,standard:e}:{...h.safelist,...e}}async function g(e=\"purgecss.config.js\"){let t;try{const s=i.join(process.cwd(),e);t=await import(s)}catch(e){throw new Error(\"Error loading the config file \"+e.message)}return{...h,...t,safelist:m(t.safelist)}}async function v(e,t){return new l(await t(e))}function y(e,t){switch(t){case\"next\":return e.text.includes(\"purgecss ignore\");case\"start\":return e.text.includes(\"purgecss start ignore\");case\"end\":return e.text.includes(\"purgecss end ignore\")}}function S(...e){const t=new l([]);return e.forEach(t.merge,t),t}function b(e){return e.replace(/(^[\"'])|([\"']$)/g,\"\")}function w(e,t){if(!t.hasAttrName(e.attribute))return!1;if(void 0===e.value)return!0;switch(e.operator){case\"$=\":return t.hasAttrSuffix(e.value);case\"~=\":case\"*=\":return t.hasAttrSubstr(e.value);case\"=\":return t.hasAttrValue(e.value);case\"|=\":case\"^=\":return t.hasAttrPrefix(e.value);default:return!0}}function A(e,t){return t.hasId(e.value)}function F(e,t){return t.hasTag(e.value)}function k(e){return\"atrule\"===(null==e?void 0:e.type)}function V(e){return\"rule\"===(null==e?void 0:e.type)}class x{constructor(){this.ignore=!1,this.atRules={fontFace:[],keyframes:[]},this.usedAnimations=new Set,this.usedFontFaces=new Set,this.selectorsRemoved=new Set,this.variablesStructure=new f,this.options=h}collectDeclarationsData(e){const{prop:t,value:s}=e;if(this.options.variables){const r=function(e,t){const s=[];return e.replace(t,(function(){const t=arguments,r=Array.prototype.slice.call(t,0,-2);return r.input=t[t.length-1],r.index=t[t.length-2],s.push(r),e})),s}(s,/var\\((.+?)[,)]/g);t.startsWith(\"--\")?(this.variablesStructure.addVariable(e),r.length>0&&this.variablesStructure.addVariableUsage(e,r)):r.length>0&&this.variablesStructure.addVariableUsageInProperties(r)}if(!this.options.keyframes||\"animation\"!==t&&\"animation-name\"!==t)if(this.options.fontFace){if(\"font-family\"===t)for(const e of s.split(\",\")){const t=b(e.trim());this.usedFontFaces.add(t)}}else;else for(const e of s.split(/[\\s,]+/))this.usedAnimations.add(e)}getFileExtractor(e,t){const s=t.find((t=>t.extensions.find((t=>e.endsWith(t)))));return void 0===s?this.options.defaultExtractor:s.extractor}async extractSelectorsFromFiles(e,t){const i=new l([]);for(const a of e){let e=[];try{await p.access(a,s.F_OK),e.push(a)}catch(t){e=r.sync(a,{nodir:!0,ignore:this.options.skippedContentGlobs})}for(const s of e){const e=await p.readFile(s,\"utf-8\"),r=this.getFileExtractor(s,t),a=await v(e,r);i.merge(a)}}return i}async extractSelectorsFromString(e,t){const s=new l([]);for(const{raw:r,extension:i}of e){const e=this.getFileExtractor(\".\"+i,t),a=await v(r,e);s.merge(a)}return s}evaluateAtRule(e){if(this.options.keyframes&&e.name.endsWith(\"keyframes\"))this.atRules.keyframes.push(e);else if(this.options.fontFace&&\"font-face\"===e.name&&e.nodes)for(const t of e.nodes)\"decl\"===t.type&&\"font-family\"===t.prop&&this.atRules.fontFace.push({name:b(t.value),node:e})}async evaluateRule(e,t){if(this.ignore)return;const s=e.prev();if(function(e){return\"comment\"===(null==e?void 0:e.type)}(s)&&y(s,\"next\"))return void s.remove();if(e.parent&&k(e.parent)&&\"keyframes\"===e.parent.name)return;if(!V(e))return;if(function(e){let t=!1;return e.walkComments((e=>{e&&\"comment\"===e.type&&e.text.includes(\"purgecss ignore current\")&&(t=!0,e.remove())})),t}(e))return;let r=!0;if(e.selector=n((e=>{e.walk((e=>{\"selector\"===e.type&&(r=this.shouldKeepSelector(e,t),r||(this.options.rejected&&this.selectorsRemoved.add(e.toString()),e.remove()))}))})).processSync(e.selector),r&&void 0!==e.nodes)for(const t of e.nodes)\"decl\"===t.type&&this.collectDeclarationsData(t);const i=e.parent;e.selector||e.remove(),function(e){return!!(V(e)&&!e.selector||(null==e?void 0:e.nodes)&&!e.nodes.length||k(e)&&(!e.nodes&&!e.params||!e.params&&e.nodes&&!e.nodes.length))}(i)&&(null==i||i.remove())}async getPurgedCSS(e,t){const s=[],i=[];for(const t of e)\"string\"==typeof t?i.push(...r.sync(t,{nodir:!0,ignore:this.options.skippedContentGlobs})):i.push(t);for(const e of i){const r=\"string\"==typeof e?this.options.stdin?e:await p.readFile(e,\"utf-8\"):e.raw,i=a(r);this.walkThroughCSS(i,t),this.options.fontFace&&this.removeUnusedFontFaces(),this.options.keyframes&&this.removeUnusedKeyframes(),this.options.variables&&this.removeUnusedCSSVariables();const n={css:i.toString(),file:\"string\"==typeof e?e:void 0};\"string\"==typeof e&&(n.file=e),this.options.rejected&&(n.rejected=Array.from(this.selectorsRemoved),this.selectorsRemoved.clear()),s.push(n)}return s}isKeyframesSafelisted(e){return this.options.safelist.keyframes.some((t=>\"string\"==typeof t?t===e:t.test(e)))}isSelectorBlocklisted(e){return this.options.blocklist.some((t=>\"string\"==typeof t?t===e:t.test(e)))}isSelectorSafelisted(e){const t=this.options.safelist.standard.some((t=>\"string\"==typeof t?t===e:t.test(e)));return u.includes(e)||t}isSelectorSafelistedDeep(e){return this.options.safelist.deep.some((t=>t.test(e)))}isSelectorSafelistedGreedy(e){return this.options.safelist.greedy.some((t=>t.test(e)))}async purge(e){this.options=\"object\"!=typeof e?await g(e):{...h,...e,safelist:m(e.safelist)};const{content:t,css:s,extractors:r,safelist:i}=this.options;this.options.variables&&(this.variablesStructure.safelist=i.variables||[]);const a=t.filter((e=>\"string\"==typeof e)),n=t.filter((e=>\"object\"==typeof e)),o=await this.extractSelectorsFromFiles(a,r),c=await this.extractSelectorsFromString(n,r);return this.getPurgedCSS(s,S(o,c))}removeUnusedCSSVariables(){this.variablesStructure.removeUnused()}removeUnusedFontFaces(){for(const{name:e,node:t}of this.atRules.fontFace)this.usedFontFaces.has(e)||t.remove()}removeUnusedKeyframes(){for(const e of this.atRules.keyframes)this.usedAnimations.has(e.params)||this.isKeyframesSafelisted(e.params)||e.remove()}getSelectorValue(e){return\"attribute\"===e.type&&e.attribute||e.value}shouldKeepSelector(e,t){if(function(e){return e.parent&&\"pseudo\"===e.parent.type&&e.parent.value.startsWith(\":\")||!1}(e))return!0;if(this.options.safelist.greedy.length>0){if(e.nodes.map(this.getSelectorValue).some((e=>e&&this.isSelectorSafelistedGreedy(e))))return!0}let s=!1;for(const i of e.nodes){const e=this.getSelectorValue(i);if(e&&this.isSelectorSafelistedDeep(e))return!0;if(e&&(u.includes(e)||this.isSelectorSafelisted(e)))s=!0;else{if(e&&this.isSelectorBlocklisted(e))return!1;switch(i.type){case\"attribute\":s=!![...this.options.dynamicAttributes,\"value\",\"checked\",\"selected\",\"open\"].includes(i.attribute)||w(i,t);break;case\"class\":r=i,s=t.hasClass(r.value);break;case\"id\":s=A(i,t);break;case\"tag\":s=F(i,t);break;default:continue}if(!s)return!1}}var r;return s}walkThroughCSS(e,t){e.walk((e=>\"rule\"===e.type?this.evaluateRule(e,t):\"atrule\"===e.type?this.evaluateAtRule(e):void(\"comment\"===e.type&&(y(e,\"start\")?(this.ignore=!0,e.remove()):y(e,\"end\")&&(this.ignore=!1,e.remove())))))}}export default x;export{x as PurgeCSS,h as defaultOptions,S as mergeExtractorSelectors,g as setOptions,m as standardizeSafelist};\n"]},"metadata":{},"sourceType":"module"}